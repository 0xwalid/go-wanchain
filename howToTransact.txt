now the system only support cli wallet to transfer in Anonymous transaction mode

here shows how to transfer from acount1 to account2 in Anonymous transaction mode in geth 

1.there are at least 3 account in cli node and keep the balance>1 ether for each account
  personal.newAccount("wanglu")

2. check balance for account[2]
  web3.fromWei(eth.getBalance(eth.accounts[2]))

3. unlock Account1
	personal.unlockAccount(eth.accounts[1],"wanglu",9999);
	
4  unlock account2
	personal.unlockAccount(eth.accounts[2],"wanglu",9999);	
	
5. get anonymous address for account2
   var wanAddr = eth.getWanAddress(eth.accounts[2]);

6. generate OTA address for account2  
	var otaAddr = eth.generateOneTimeAddress(wanAddr)

7. set the 	Anonymous contract address
	var toAddr = "0x0000000000000000000000000000000000000006"

8  transfer eth to the Anonymous contract
	eth.sendOTATransaction({from: eth.accounts[1],to: toAddr,value: web3.otWei(1),data: otaAddr})

	
9  account2 get balance from the anonymous contract
	eth.sendOTARefundTransaction({from:eth.accounts[2],to:toAddr,value:web3.toWei(1),data: otaAddr})

	10 get balance
   web3.fromWei(eth.getBalance(eth.accounts[2]));
	
============================================================================================================

how to buy stamp

1.there are at least 3 account in cli node and keep the balance>1 ether for each account
	//personal.newAccount("wanglu")

2. check balance for account[2]
  web3.fromWei(eth.getBalance(eth.accounts[2]))

3. unlock Account1
	personal.unlockAccount(eth.accounts[1],"wanglu",9999);
	
4  unlock account2
	personal.unlockAccount(eth.accounts[2],"wanglu",9999);

5. get anonymous address for account2
   var pubs = eth.getWanAddress(eth.accounts[2]);

6. generate OTA address for account2  
	var otaAddr = eth.generateOneTimeAddress(pubs)
	
7. set the 	Anonymous contract address
	var toAddr = "0x0000000000000000000000000000000000000006"
8. buy a stamp
  eth.buyOTAStamp({from: eth.accounts[1],to: toAddr,value: web3.toWei(0.01),data: otaAddr})	

============================================================================================================
to get ota stamp set

9. eth.getStampMixSet({from: eth.accounts[1],to: toAddr,value: web3.toWei(0.01),data: otaAddr})	  
  
============================================================================================================  
how to debug contract transfer

the sample contract is ERC20.sol in the folder ./go-wanchain/contracts/erc20 in the github repo

1. unlock account 1
	personal.unlockAccount(eth.accounts[2],"wanglu",9999);
	
2. unlock account 2
	personal.unlockAccount(eth.accounts[3],"wanglu",9999);

3. set contract abi
	var  erc20simple_contract =  web3.eth.contract([{"constant":false,"inputs":[{"name":"_from","type":"string"},{"name":"_to","type":"string"},{"name":"_value","type":"uint256"}],"name":"otatransfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":false,"inputs":[{"name":"_receiver","type":"address"},{"name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":true,"inputs":[{"name":"_owner","type":"string"}],"name":"otabalanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":true,"inputs":[],"name":"MINT_CALLER","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":false,"inputs":[{"name":"_receiver","type":"string"},{"name":"_amount","type":"uint256"}],"name":"otamint","outputs":[],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"}]);

4. deploy contract
	var erc20simpleInt = erc20simple_contract.new(
		   {
			 from: web3.eth.accounts[2], 
			 data: '0x6060604052341561000f57600080fd5b5b610b4d8061001f6000396000f3006060604052361561008c576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630a00885c1461009157806323b872dd1461015257806340c10f19146101cb57806366bf741b1461020d57806370a082311461027e5780638e17d175146102cb5780639df6192d14610320578063a9059cbb14610386575b600080fd5b341561009c57600080fd5b610138600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919080359060200190919050506103e0565b604051808215151515815260200191505060405180910390f35b341561015d57600080fd5b6101b1600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610685565b604051808215151515815260200191505060405180910390f35b34156101d657600080fd5b61020b600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610809565b005b341561021857600080fd5b610268600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061085a565b6040518082815260200191505060405180910390f35b341561028957600080fd5b6102b5600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108d1565b6040518082815260200191505060405180910390f35b34156102d657600080fd5b6102de61091a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561032b57600080fd5b610384600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001909190505061091f565b005b341561039157600080fd5b6103c6600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061099e565b604051808215151515815260200191505060405180910390f35b60008073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561041c57600080fd5b816001856040518082805190602001908083835b60208310151561045657805182525b602082019150602081019050602083039250610430565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020541015801561057157506001836040518082805190602001908083835b6020831015156104cc57805182525b6020820191506020810190506020830392506104a6565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902054826001856040518082805190602001908083835b60208310151561053a57805182525b602082019150602081019050602083039250610514565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390205401115b1561067357816001846040518082805190602001908083835b6020831015156105b057805182525b60208201915060208101905060208303925061058a565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060008282540192505081905550816001856040518082805190602001908083835b60208310151561062a57805182525b602082019150602081019050602083039250610604565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600082825403925050819055506001905061067d565b6000905061067d565b5b5b9392505050565b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015801561075257506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b156107f857816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555060019050610802565b60009050610802565b5b9392505050565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b5050565b60006001826040518082805190602001908083835b60208310151561089557805182525b60208201915060208101905060208303925061086f565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390205490505b919050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b600081565b806001836040518082805190602001908083835b60208310151561095957805182525b602082019150602081019050602083039250610933565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600082825401925050819055505b5050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410158015610a6b57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b15610b1157816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555060019050610b1b565b60009050610b1b565b5b929150505600a165627a7a72305820fd12fd481c8fb7230e4f884a2cf0cad97f4108d1dca4082b8db4d3a617cdfb8e0029', 
			 gas: '4700000'
		   }, function (e, contract){
			console.log(e, contract);
			if (typeof contract.address !== 'undefined') {
				 console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
			}
   })
 
  will get the data like following
  Contract mined! address: 0x1ec8cd12a6ca577e5851be81a568440435dd0bc9 transactionHash: 0xcdb24a1484c925c199c71d7741bb4b0c65b3c9d0797c0184271db63ea869d736

5. set the contract address
	var contractAddr = "0x1ec8cd12a6ca577e5851be81a568440435dd0bc9" 
 
6. set the contract instance referrence
	var erc20simple = erc20simple_contract.at(contractAddr)

7. get anonymous address for account1
	var wanAddr1 = eth.getWanAddress(eth.accounts[2]);

8. generate OTA address for account1  
	var otaAddr1 = eth.generateOneTimeAddress(wanAddr1)
	var otaStamp = eth.generateOneTimeAddress(wanAddr1)

9  get anonymous address for account2
	var wanAddr2 = eth.getWanAddress(eth.accounts[3]);

10. generate OTA address for account2  
	var otaAddr2 = eth.generateOneTimeAddress(wanAddr2)

11 mint token for test,only for test
	erc20simple.otamint(otaAddr1,web3.toWei(10),{from:eth.accounts[2]})
	erc20simple.otabalanceOf(otaAddr1)
	
11. generate data for call otatranfer
	var callData = erc20simple.otatransfer.getData(otaAddr1,otaAddr2,web3.toWei(2))

	
12. buy a stamp for ota tranfere transaction
	eth.buyOTAStamp({from: eth.accounts[2],to: "0x0000000000000000000000000000000000000005",value: web3.toWei(0.01),data: otaStamp})

	
13. get transfer signed raw data
	eth.signOTAContractTransaction({from:eth.accounts[2], to:contractAddr, data:callData},otaAddr1,otaStamp)

	will got following data
	{
	  raw: "0xf9051b028083030d4083015f9094000000000000000000000000000000000000000580b904b1045501e80a00885c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000000000000000000086307830333165313663326632353432303835346433613664343135656539323332323962306664373038656161623062623965383866356661653135623761633036353130333537383532646363633539653936636361373064343434633839633066623136396333323063303162636431366330366136626137343536333966636639303500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000086307830323333396662616332373136613862303032343061653730653335356638306265613261393637666530616332623330636135303633393864663532653963386230326436343638313130313134643939623635393665393035346531356437636163316535383061333032306261343939663463363734643637643236646534313800000000000000000000000000000000000000000000000000002bddcf25d0a42ea6f041bde4d0e82902a0e95d31b4caf778744b15d7668914060826bb25f1750622bdf7950ad01eddce72303b160fb5f5b35956bac614fff4f3c04af80fc7215199f499b04257d5832b77d0b3110104410459f6ed6cb857a65dce68b58d8808092e984355da25b42247dd1c3372ea11ff7285a33a33cf368ac5e4fab3966ce910df99185ced64c7ce145e036276781186c2203839a9218c6ccd5d6c958ea64456987f516fb384f3006e85bb0ee03a165b5b1720de9715236ca7eaeda441b532a3ca8cc81f40135a0616a0959cd6c59fc4c978a041045402f35c0ce86ddb3e0fad716816931c52975a035a8042f0d1fc31ab7e11ed2310554cfccf64d5074d5589e68f68b4aae02bd87b31f67eb2d85641ec0708a87820da4bfac583246786f143ed3e68b762c2a0527e87477664d155cda78967e7cbb720dbec2b9e52fb67d54107165bd9aaf784bbc827b8ea4c0d675ad4cc19b354805c410444f5bbd4d3951b81f4b6eed82a6d59d21243c945f1bde0f69557e86805819dfd5a8acf7cf5e1cafee672822a1e31006c83c36735e5a3c73be3c55582f9bf8a33208b4f3b412f9c90b29be4e25caf37f0ba21adfe800bb26256149459fd073e564a208063da7da470351ebf4891cf3da1edcc8e68f7b04bf945fb3c334ba4d6d450164104e0cea93a8b57b849c58d4050be57cd6e1c8bd8dd2ccb18c01179879547510eed8507945902e5244bae291fb7e286a21250fbecee66690b209f79813125a511de20ff6b52d373ce870e5d380e7ea0f734e13a199c4e4ff63c61e648b3c181e7d4cc20e2765bc71617063c337ceee7e239110c0c0d0affdc6336aab676f9f0643230584104140cda306e5a981748a5d16882c79be9b47225ddc207fe6af697a4cdc29c4e133f60cef5de63f721025aca11dbdfe5522637124f3d9f06a7eb22178c5e44710620b5f5b35956bac614fff4f3c04af80fc7215199f499b04257d5832b77d0b311011ba0aa95cbd833d51bd28aaaf8b99a3b9dadf96fb871aad75fa4d4d104a19a8e4b7ba00ea36bcbae7a570117375ae0bb43b0a2d2095c395252347e64bc29e2c35cc929c0c0c0c0",
	  tx: {
		Txtype: "0x2",
		gas: "0x15f90",
		gasPrice: "0x30d40",
		hash: "0x32d16bf995ca39697de48f25f39cc444039797dcb8666d1a2fff95538e61ec9b",
		input: "0x04940188744a804c00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000001023078663663666636626163353637636366653761376230306334313963633766373863343730626433336563626332653065333365316365346565626139393834323831323965663366336562366262343337323862636435653431336633373934626164326239353136353138353161656539353764313133656332636239323637303762636662363933323764313535386263653063393864643636623639396462376462306532323636623161373866616361383464616432646536383766643861333230646464373561613030376136333134393664633636376361616564616430346532343732353435373033613863313761346431316465613739380000000000000000000000000000000000000000000000000000000000003bb6ac8e384815825d1e10845130461fabe647ec2db7b5db10a2430a65aaa01c7f055c88945bd9e43de0d528ce1fad816d28b52badbb905a40721c7950e80eb249c0de3d42402d45577116d844a4cc1c33f39ec5b1c50627c8a15955f6c0b7b3c02475c74f56b3580aa58e9cd9334d5f671a8e90da0fcab1cefff4831f3bf1d10ca329596a3a5b237b241cbc1e4671c5b0b9e4410441044968d461b60756f493df75acb25e2081aad5df8e820e16f5a5098546d5fd022bd5b441f0093fba79605b3326d6c8f7ca90d54dad597e356e25414b89d1f9f313200ec3bc60b3923a101408def453a6d542915c88cfdfddb0cde4240083980e4b0520b1277b2bd89075101475bc18593bf4f54d229800743812275e842daea7bc2f0941042db7b5db10a2430a65aaa01c7f055c88945bd9e43de0d528ce1fad816d28b52badbb905a40721c7950e80eb249c0de3d42402d45577116d844a4cc1c33f39ec520154650e4c5a4c146d55adec5ecf20a7e491cadbb9d7e8bc0ff020cf41b9422be2078a0f99406abc5267c33368046377a9ff4aef27d89a21dd330c7032e54df0d64410410b5560928634b63d3139b37a41aa8ba795433c9ecdde0d799297e4c855c30f1f4a2a8e3fdeef8f34a99f64ebd9865db0fd8c21f7e186afcf677c0babde95e2b2011b43c9df48d1acaf52cf5e001df5e6b0ed9c66ee8cf70ec1d8a026d2de8ded220309747c9d425c7c064eca35a277a217264f6cbf28d1ce95b4c00c77244d262c34104a2e3996bc920f4b5856ab52c06142eeeb962e39c5fe24f2f297583458b28e09b318e3c3abf291fbcfc58c43aa0a017a71da1e70b494126a66bd014c7ad7ebc262048625a85f2617fe5d2f9b0972aee3ad3d5afea3845508dee1351953587180a4f208cc69d104258a7a79c4156dcc9e196d017b09af216b0660b4d630fdb684bb5494104cc324a965cb52c910d30d5d034246a9010748f85fa2ea74a44d5bf44fa31769ec3710a292221b51132bc56f34d860fd0fb204a805205c92918e62ffc60b84d2e204ed705bd960dda314d54fdd9f30161c51b19c8feabefbdb94c50c577988cd7fb",
		nonce: "0x0",
		r: "0x329cbfad81ebca28a4f83a58baf0c5f5b823421a90032a0ba140cce246ece1fd",
		s: "0x47bc4c6f04977c86b10f0f52f21add7882a78ab32b4578fc6e4e2bd2513b1a2d",
		to: "0x0000000000000000000000000000000000000005",
		v: "0x1c",
		value: "0x0"
	  }
	}


14. assign raw data from above signOta..
		var rawTx = "0xf9051b028083030d4083015f9094000000000000000000000000000000000000000580b904b1045501e80a00885c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000000000000000000086307830326537333334643461383030383031393034613465333938366234313663643034623261333532363033636333346630333938636235343530633535303666633930336262393465373665346536303635313262613837646538373666393035376565646431646566663835363531366463363061336366643835643439656237323700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000086307830323331313339373863323163363363663038326464666632363437386433663636353532643131613636653361646133613036646337383563323931376232373530336538303465306438616338343563623139373436636165613939323131346434663865386432636636326366643465666162346430343431366363643836396600000000000000000000000000000000000000000000000000001ec8cd12a6ca577e5851be81a568440435dd0bc9c50ca83c8709ee7f558d44f1656992deee7d699406f6fb2c801be99e8708d7cd39ff01d534461e2252c5b18b3894b84c43b0c6a66ad35c4b4a600011c5d243c20104410403a8d61721cdf762745dabcb1f4a052e046455964a9486ffa7f8d8c397d2568229f01df6d1331e1156d3c2e81bb9181492d3bb28d6d6377b05982479d7afc6f320f6c9da179bc2eb67f2c7a7700506737ae6050ba91fa9c20398e085f6ebc6633f20b8a09899d69701c3416c7a03e1103f8ea1e52ed25cb8fb2747dd490a41c4960b410459f6ed6cb857a65dce68b58d8808092e984355da25b42247dd1c3372ea11ff7285a33a33cf368ac5e4fab3966ce910df99185ced64c7ce145e036276781186c2201f7385e2f9e1e2b0d7daf25140ee8f65d4c57743acf3e39865914f072338cdd92001891c0cd9c59a79c355ccf40dcf2ab2c3011943be58398ada414005def3f2274104c2896ef6ad69722a8cdb47cc10c43bbaabb585499733a4a4b2456713db7d78fa35c3d944672f70f176c01fddcf27c45210e66e80eabbbd57ba2418755f0a5abc2029ed14c5417be0938804419595f1b2afb244cd2c584876a1a637efa931f57f2420898f330aa875b486f12a45d7ecf6713171408a7a000fc7d28cb32530c9385c7a4104fa5ec10e63291c3bf49ad6fa5e479092a2cd9ff0b98bc4b4d59487816a2f693fd368355a5805f2443881fd6678261c328a4b3f75f17d63ac641f5ff4c51a758c209bfb070b414be15f671836fb3553dc992216b55459678e6fb0c595a020d5e22320e7471fe26fac8b52ac6fd96fb89b41328221c7520b821d45bd9a7e79a0844b7d4104ebf09c0e1364a6f1d31826ffacd236a6410a0ea17dbe45e5ebce24d22ad41fe4978c33f50fa18b5ef6582e0bb7ae84883de41ad7f475154192be5f4f8d1c166120ff01d534461e2252c5b18b3894b84c43b0c6a66ad35c4b4a600011c5d243c2011ca0b30765784e7e347f2fdd15667928caec1bac101b9748611c2d59f03c270a8946a07df5d6a5d9d78c1c2e5675a76df8b1791b450879492745ef4b73bcf6f0ed3107c0c0c0c0"

15. begin contract ota transfer transaction
	eth.sendRawTransaction(rawTx)

16. veriy the ota tranfer result
	erc20simple.otabalanceOf(otaAddr2)
