now the system only support cli wallet to transfer in Anonymous transaction mode

here shows how to transfer from acount1 to account2 in Anonymous transaction mode in geth 

1.there are at least 3 account in cli node and keep the balance>1 ether for each account
  personal.newAccount("wanglu")

2. check balance for account[2]
  web3.fromWei(eth.getBalance(eth.accounts[2]))

3. unlock Account1
	personal.unlockAccount(eth.accounts[1],"wanglu",9999);
	
4  unlock account2
	personal.unlockAccount(eth.accounts[2],"wanglu",9999);

5. get anonymous address for account2
   var pubs = eth.getPublicKeysRawStr(eth.accounts[2]);

6. generate OTA address for account2  
	var otaAddr = eth.generateOneTimeAddress(pubs)

7. set the 	Anonymous contract address
	var toAddr = "0x1000000000000000000000000000000000000006"

8  transfer eth to the Anonymous contract
	eth. sendOTATransaction({from: eth.accounts[1],to: toAddr,value: web3.toWei(1),data: otaAddr})

9  account2 get balance from the anonymous contract
	eth.sendOTARefundTransaction({from:eth.accounts[2],to:toAddr,value:web3.toWei(1),data: otaAddr})


how to buy stamp
1.there are at least 3 account in cli node and keep the balance>1 ether for each account
	personal.newAccount("wanglu")

2. check balance for account[2]
  web3.fromWei(eth.getBalance(eth.accounts[2]))

3. unlock Account1
	personal.unlockAccount(eth.accounts[1],"wanglu",9999);
	
4  unlock account2
	personal.unlockAccount(eth.accounts[2],"wanglu",9999);

5. get anonymous address for account2
   var pubs = eth.getPublicKeysRawStr(eth.accounts[2]);

6. generate OTA address for account2  
	var otaAddr = eth.generateOneTimeAddress(pubs)

7. buy a stamp
  eth.buyOTAStamp({from: eth.accounts[1],to: toAddr,value: web3.toWei(0.01),data: otaAddr})	
  
/////////////////////////////////////////////////////////////////////////////////////////////////  
how to debug contract transfer

the sample contract is ERC20.sol in the folder ./go-wanchain/contracts/erc20 in the github repo

personal.unlockAccount(eth.accounts[1],"wanglu",9999);
personal.unlockAccount(eth.accounts[2],"wanglu",9999);

var erc20simple_contract = web3.eth.contract([{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_receiver","type":"address"},{"name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"string"}],"name":"otabalanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"string"},{"name":"_value","type":"uint256"}],"name":"otatransfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]);
var erc20simpleInt = erc20simple_contract.new(
   {
     from: web3.eth.accounts[0], 
     data: '0x6060604052341561000f57600080fd5b6107878061001e6000396000f30060606040523615610076576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806323b872dd1461007b57806340c10f19146100f457806366bf741b1461013657806370a08231146101a7578063744a804c146101f4578063a9059cbb14610272575b600080fd5b341561008657600080fd5b6100da600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506102cc565b604051808215151515815260200191505060405180910390f35b34156100ff57600080fd5b610134600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061044b565b005b341561014157600080fd5b610191600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061049b565b6040518082815260200191505060405180910390f35b34156101b257600080fd5b6101de600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610510565b6040518082815260200191505060405180910390f35b34156101ff57600080fd5b610258600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091908035906020019091905050610558565b604051808215151515815260200191505060405180910390f35b341561027d57600080fd5b6102b2600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506105dd565b604051808215151515815260200191505060405180910390f35b6000816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015801561039957506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b1561043f57816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555060019050610444565b600090505b9392505050565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505050565b60006001826040518082805190602001908083835b6020831015156104d557805182526020820191506020810190506020830392506104b0565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020549050919050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000816001846040518082805190602001908083835b602083101515610593578051825260208201915060208101905060208303925061056e565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600082825401925050819055506001905092915050565b6000816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054101580156106aa57506000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054826000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401115b1561075057816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555060019050610755565b600090505b929150505600a165627a7a72305820c0ba549fd3dea569044de38bf160f592b4041a45a1e824abf294c923f814c21c0029', 
     gas: '4700000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 }) 
 
Contract mined! address: 0xcfd663cf68bbda7ea22c91978ea02d32b7ec6756 transactionHash: 0xf57160797b1cbe2c82f0ba2f8278eecedd22a9728c44f6b70ccbd27451c97aee

var contractAddr = "0xa81a2947240bfd4f42d6770725eda8ab51eecb3c" 
 
var erc20simple = erc20simple_contract.at(contractAddr)

//get anonymous address for account1
var pubs1 = eth.getPublicKeysRawStr(eth.accounts[1]);

//generate OTA address for account1  
var otaAddr1 = eth.generateOneTimeAddress(pubs1)

//get anonymous address for account2
var pubs2 = eth.getPublicKeysRawStr(eth.accounts[2]);

//generate OTA address for account2  
var otaAddr2 = eth.generateOneTimeAddress(pubs2)

//generate data for call otatranfer
var callData = erc20simple.otatransfer.getData(otaAddr2,web3.toWei(1))

//buy a stamp
eth.buyOTAStamp({from: eth.accounts[1],to: "0x0000000000000000000000000000000000000006",value: web3.toWei(0.01),data: otaAddr1})

eth.signOTAContractTransaction({from:eth.accounts[1], to:contractAddr, data:callData},otaAddr1)

//assign raw value from abovr signOta..
var rawTx = "0xf904fa028083030d4083015f9094000000000000000000000000000000000000000580b9049004940188744a804c00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000000000000000102307861653531353463646632333135653735333435383337623062333438393964353666363465396464393139333638333238646135356564366232316338366366366262366230343731646638346264393764386263343535663566663566663563643265633566636237653132366664643034313433633339386235383932313434393337383034623262336566356333363461336163353739646564623639343534383336623661613565633762633735623665646364663265373139373338373866326237326363643634343530656236333461343563333936323034363266376338333035383737396332613735373362643039626566363863353866000000000000000000000000000000000000000000000000000000000000a81a2947240bfd4f42d6770725eda8ab51eecb3c82084e3a2cdf71fafbe9873e659ade82eed650c9d419543012de96f0cd4eb1068cd0ec274246853bb3d66c163b94ba828839ea49009bc943f42aaa21ae7c3c12a7fef9d41f99de88e2f30205df27e09a61d16eb0ec3f0c456d95e0a31b258fede69b04ad87c8228cb9424dff1a7650cc725ae39318ebaf7f97e6f7201e60567804410455546d8c5a6c33e231c756dfb0226d1c48ef3cc60bfde372f3fb0a712e57f8311cc1c87857dcb8307be3cfef5b7a63d0197f57b9024088fb7c713dbbe4d152f320d88755b97dc3b024a46e760d1d6694d4bd1576d89c7bd1e3b37570c24c09224920c7e602b95742f7066bee86f666226e309235de73a41cba7c52fac85782236788410482084e3a2cdf71fafbe9873e659ade82eed650c9d419543012de96f0cd4eb1068cd0ec274246853bb3d66c163b94ba828839ea49009bc943f42aaa21ae7c3c12209ee327e4420a4bed3455d71cb92c57a1f4e19b3148273d9ee8b6a5a5e1f1768920cddc820e2a5a553851964930bcc0df932e9e7da801288b855cf3625280ea83714104d124383699fdb9dc972527dfc1480f647901d0030cb4eb557f273317b3daf7c9c37486477a5056a255ac697a298e64b0b7c9c50c3a5fe3ec3c75930ac000d92220f54527ff0a269968179cb128088a5a48111f1e34a80f36e20d2d62705bfe0ff4209842db0277053145e836172bb251e7bb8b66fc33fbbf2be1bbee865e5c722c9741048a94116559aefecb91c29b4419d05b8da805dee92a1eb2ffd8fd6353a26397764a544a2d86bd1ed940c6156aea57d12d6b500637f69ef0bd7257547096a72f2a20306ae4b9233072b0d0e5a3bab0c0c35f1cea0275809a6d9215d49d256a3c812e207f33e15927f3baf2ac5c5c45f8a84b368cd23b839064443a8933982a46c74e164104991c60d975b7f7ec8e86e4ba2e9b24f218a89f1e0816e412a9fcf3d2575b0028ff3f882422d4c2366ce006e23a34b49aadc9a3d352e6957816f0245b8f42388020a09e54042945738b7c98b99824c1b0e79e79cc46dfa0b891dac9f19070cdde7c1ba08724e64805387fb382957b5a56d5e3e526ce9b1359c527e85debd9b2cb4e4b28a04e7cc694b2c9ea35c99ff684cd65bf78984f03c07205f2ef3d1425c234948c20c0c0c0c0"

eth.sendRawTransaction(rawTx)

erc20simple.otabalanceOf(otaAddr2)
